# Vega-Currency_market_making
# Валютный маркет мейкинг

## Постановка задачи
Тема: Flow internalization in crypto market
Цель работы в том, чтобы найти оптимальный способ сдвигания цен.

Модель на основе обучения с подкреплением (DQN).

Общая структура модели описана в статье по [ссылке](https://www.notion.so/Internalization-907cd477edc449c79a935263167ba49e#574c2dfa049247a29e7cfde5cf5fae54).

Предлагаю взять базовый каркас модели, описанный на страницах 1-3 и обогатить его чем-нибудь со страницы 4.

Стоит использовать практический подход к решению задачи, т.е. вместо выписывания и решения уравнения Бэллмана специфицировать и обучить RL модель на реальных данных.

## Вычислительные эксперименты
Данные лежат вот [тут](https://drive.google.com/drive/folders/1uVRv8l_x0dqWZdODL89usxaOzh5XRImK).

## Запуск модели
Общий подход следующий.

Мы итерируемся по данным от начала и до конца. Модель выставляет биды и офера в стакан, отменяет их или переставляет на более предпочтительные места. По ходу дела она собирает фидбэк и учится ставить ордера по оптимальным ценам.

Для каждого выставленного ордера надо понять, исполнится он или нет. Ордер может исполниться по двум причинам.

1. Если рынок пошел в его сторону. Например, мы выставили офер по $61.25$. А через $1$ мс рыночный бид стал $61.30$. Для этого анализа понадобятся цены из файлов $tob∗$.
2. Если на рынке произошла сделка по цене, пересекающей наш ордер. Например, мы выставили офер по $61.25$. А через $1$ мс произошла сделка по цене $61.26$ . Это значит, что эта сделка вызвана ордером, который смэтчился бы с нашим ордером.

При итерировании по данным не требуется данные никак группировать. Просто применяем все апдейты по очереди. Данных много, поэтому код на python скорее всего будет работать довольно медленно. Лучше писать симуляцию на каком-то компилируемом языке на ваш выбор. Либо как-то ускорять python (например [вот так](https://github.com/exaloop/codon)).

Модель при принятии решения может использовать как данные из сырого биржевого стакана, так и синтетические котировки. Синтетика кратко описана [вот тут](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/d4d72bdb-ce29-4b26-9deb-93239db48022/Synthetic_liquidity.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230207%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230207T161651Z&X-Amz-Expires=86400&X-Amz-Signature=e02511b9e677f9981304370d66ba6c2c4426d98d1311ebe3926bb3dcff8bf459&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Synthetic%2520liquidity.pdf%22&x-id=GetObject).

## Параметры пакетов:
1. Tensor Flow Version: 2.11.0
2. Keras Version: 2.11.0
3. Python 3.10.9 | packaged by conda-forge | (main, Feb  2 2023, 20:26:08) [Clang 14.0.6 ]
4. Pandas 1.5.3
5. Scikit-Learn 1.2.1
6. Numpy 1.24.2
7. Gym 0.23.0